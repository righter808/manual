var OR=window.OR||{};OR.CS=OR.CS||{};OR.CS={initHeader:function(a){$(".nav-item, .user-info").live("mouseenter mouseleave",function(f){var g=$(this),c=f.type=="mouseenter";g.toggleClass("nav-current",c);if(g.find(".nav-menu").size()){if(g.data("t")){clearTimeout(g.data("t"))}var d=setTimeout(function(){g.find("div.nav-menu").toggle(c);g.toggleClass("nav-active",c);clearTimeout(d)},200);g.data("t",d)}});OR.initLoginInfo(a)},heightLight:function(c){var a=c.split("|");var b=$("div.search-result dl dt a, div.search-result dl dd");b.each(function(){var e=$(this).text();for(var d=0;d<a.length;d++){var f=new RegExp(a[d],"ig");e=e.replace(f,'<span class="red">'+a[d]+"</span>")}$(this).html(e)})},initContact:function(a){$("#vip-contact ").hover(function(){$("#vip-contact .contact-online").show()},function(){$("#vip-contact .contact-online").hide()})},initSearch:function(c){var e=$("#searchform"),b=e.find('input[name="word"]');if(typeof c!="undefined"&&typeof c.keyword!="undefined"){this.heightLight(c.keyword)}var d=623;if(typeof c!="undefined"&&typeof c.resultBoxWidth!="undefined"){d=c.resultBoxWidth}e.on("submit",function(){var f=$.trim(b.val());if(!f.length){return false}$.ajax({type:"get",dataType:"json",url:"/search/mask?key="+f,success:function(g){},error:function(g){}})});b.placeHolder({holderClass:"holder"});b.autocomplete("/search/keywords",{minChars:1,queryParamName:"key",remoteDataType:"json",matchSubset:0,filter:false,sortResults:false,onItemSelect:function(f){e.trigger("submit")},processData:function(k){var h=[],g;for(var j=0,f=k.length;j<f;j++){g=k[j];h.push({value:g.keyword,data:g})}return h},showResult:function(g,f){return a(b.val(),g)},extraParams:{format:"autocomplete"}});function a(f,h){var g=new RegExp("("+f+")","ig");return h.replace(g,"<strong>$&</strong>")}},initHelpCategory:function(){this.initSearch({resultBoxWidth:683})},initHelpQuestion:function(a){this.initSearch({resultBoxWidth:683});this.hitQuestion(a.questionId);$("#feedback-box a.sign-yes").click(function(){$("#feedback-box .box-content").html('<p style="text-align:center;">\u611f\u8c22\u4f60\u7684\u53cd\u9988\uff01</p>');setTimeout(function(){$("#feedback-box").remove()},3000);$.ajax({type:"get",dataType:"json",url:"/question/feedback?useful=1&qid="+a.questionId,success:function(b){},error:function(b){}})});$("#feedback-box a.sign-no").click(function(){$("#feedback-box .box-content").html('<p style="text-align:center;">\u611f\u8c22\u4f60\u7684\u53cd\u9988\uff01</p>');setTimeout(function(){$("#feedback-box").remove()},3000);$.ajax({type:"get",dataType:"json",url:"/question/feedback?useful=0&qid="+a.questionId,success:function(b){},error:function(b){}})})},hitQuestion:function(a){$.ajax({type:"get",dataType:"json",url:"/question/hit?qid="+a,success:function(b){},error:function(b){}})},initGuide:function(){window.onload=function(){var a=$("#main-height").offset().top;var d=$("#footer").height();var b=$("#main-height").height();function c(){var e=document.body.offsetHeight-a-d;e=e>b?e:b;if(!$.browser.msie||$.browser.version>"7.0"){$("#main-height").css("height",e)}}window.onresize=c;c()}},initSelf:function(){window.onload=function(){var a=$("#main-height").offset().top;var d=$("#footer").height();var b=$("#main-height").height();function c(){var e=document.body.offsetHeight-a-d;e=e>b?e:b;if(!$.browser.msie||$.browser.version>"7.0"){$("#main-height").css("height",e)}}window.onresize=c;c()}},initSlide:function(b){var c=[];$("#"+b+" a.focus-item").each(function(){var e=$(this),d=e.find("img");c.push({src:d.attr("src"),url:e.attr("href"),title:e.attr("title")})});if(c.length){$("#"+b).empty();var a=new $.slide({parent:"#"+b,width:800,height:420,items:c})}}};$.cookie=function(b,h,m){if(typeof h!="undefined"){m=m||{};if(h===null){h="";m.expires=-1}var d="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var e;if(typeof m.expires=="number"){e=new Date();e.setTime(e.getTime()+(m.expires*24*60*60*1000))}else{e=m.expires}d="; expires="+e.toUTCString()}var l=m.path?"; path="+m.path:"";var f=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(h),d,l,f,a].join("")}else{var j=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var g=0;g<k.length;g++){var c=$.trim(k[g]);if(c.substring(0,b.length+1)==(b+"=")){j=decodeURIComponent(c.substring(b.length+1));break}}}return j}};$.fn.Floatbox=function(e){var c=this;var a="holder";e=e||{};if(e.cls){a=e.cls}var g=c.offset().top;var b=$("#center-sidebar").height();var f=this.attr("id");this.after($('<div id="'+f+'-holder"></div>').width(this.width()));function d(){var k=document.documentElement.scrollLeft+document.body.scrollLeft;var j=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop;if(j>g){c.addClass(a);c.css({position:"fixed",top:0});var i=$("#center-sidebar").offset().top;var h=$(".side-menu").height();if(h-i-b<1){var j=h-b;c.css({position:"absolute",top:j})}}else{c.removeClass(a);c.removeAttr("style")}if(c.is("."+a)&&k>0){c.get(0).style.left=-k+"px"}else{if(c.get(0).style.left){c.get(0).style.left=null}}}$(window).bind("resize",d).bind("scroll",d)};function onResize(){$(".main-body, .side-menu").css("height","auto");var c=$(window).height();var b=$(".side-menu").height();var e=$(".main-body").height();var a=$(".footer").outerHeight()+$(".promise").outerHeight();var d=Math.max(Math.max(b,e),(c-a-40));if(d>500){$(".main-body, .side-menu").css("height",d+"px")}else{$(".main-body, .side-menu").css("height","500px")}};
